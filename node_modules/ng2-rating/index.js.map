{"version":3,"sources":["index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import {Component, OnInit, Input, Output, EventEmitter, HostListener, forwardRef, NgModule} from \"@angular/core\";\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR, NG_VALIDATORS, Validator, AbstractControl} from \"@angular/forms\";\nimport {CommonModule} from \"@angular/common\";\n\n@Component({\n    selector: \"rating\",\n    template: `\n<span (mouseleave)=\"resetHovered()\"\n      class=\"rating\"\n      [class.disabled]=\"disabled\"\n      [class.readonly]=\"readonly\"\n      tabindex=\"0\"\n      role=\"slider\" \n      aria-valuemin=\"0\"\n      [attr.aria-valuemax]=\"ratingRange.length\" \n      [attr.aria-valuenow]=\"model\">\n    <span *ngFor=\"let item of ratingRange; let index = index\">\n        <i (mouseenter)=\"setHovered(item)\" \n           (mousemove)=\"changeHovered($event)\"\n           (click)=\"rate(item)\" \n           [attr.data-icon]=\"fullIcon\"\n           class=\"{{ iconClass }} half{{ calculateWidth(item) }}\"\n           [title]=\"titles[index] || item\">{{ emptyIcon }}</i>\n    </span>\n</span>\n`,\n    providers: [\n        { provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => Rating), multi: true },\n        { provide: NG_VALIDATORS, useExisting: forwardRef(() => Rating), multi: true },\n    ],\n    styles: [`\nspan.rating {\n    cursor: pointer;\n    outline: none;\n}\nspan.rating.readonly {\n    cursor: default;\n}\nspan.rating.disabled {\n    cursor: not-allowed;\n}\nspan.rating i{\n    font-style: normal; \n}\n.star-icon {\n    color: #ddd;\n    font-size: 2em;\n    position: relative;\n}\n.star-icon:before {\n    color: #FDE16D;\n    content: attr(data-icon) \" \";\n    position: absolute;\n    left: 0;\n    overflow: hidden;\n    width: 0;\n} \nspan.rating.disabled .star-icon:before {\n    color: #ECECEC;\n    text-shadow: none;\n}\n.star-icon.half10:before {\n    width: 10%;\n}\n.star-icon.half20:before {\n    width: 20%;\n}\n.star-icon.half30:before {\n    width: 30%;\n}\n.star-icon.half40:before {\n    width: 40%;\n}\n.star-icon.half50:before {\n    width: 50%;\n}\n.star-icon.half60:before {\n    width: 60%;\n}\n.star-icon.half70:before {\n    width: 70%;\n}\n.star-icon.half80:before {\n    width: 80%;\n}\n.star-icon.half90:before {\n    width: 90%;\n}\n.star-icon.half100:before {\n    width: 100%;\n}\n@-moz-document url-prefix() { /* Firefox Hack */\n  .star-icon {\n    font-size: 50px;\n    line-height: 34px;\n  }\n}\n`]\n})\nexport class Rating implements OnInit, ControlValueAccessor, Validator {\n\n    // -------------------------------------------------------------------------\n    // Inputs\n    // -------------------------------------------------------------------------\n\n    @Input()\n    iconClass = \"star-icon\";\n\n    @Input()\n    fullIcon = \"★\";\n\n    @Input()\n    emptyIcon = \"☆\";\n\n    @Input()\n    readonly: boolean;\n\n    @Input()\n    disabled: boolean;\n\n    @Input()\n    required: boolean;\n\n    @Input()\n    float: boolean;\n\n    @Input()\n    titles: string[] = [];\n\n    // -------------------------------------------------------------------------\n    // Input Accessors\n    // -------------------------------------------------------------------------\n\n    @Input()\n    set max(max: number) {\n        this._max = max;\n        this.buildRanges();\n    }\n\n    get max() {\n        return this._max;\n    }\n\n    // -------------------------------------------------------------------------\n    // Outputs\n    // -------------------------------------------------------------------------\n\n    @Output()\n    onHover = new EventEmitter();\n\n    @Output()\n    onLeave = new EventEmitter();\n\n    // -------------------------------------------------------------------------\n    // Public properties\n    // -------------------------------------------------------------------------\n\n    model: number;\n    ratingRange: number[];\n    hovered: number = 0;\n    hoveredPercent: number = undefined;\n\n    // -------------------------------------------------------------------------\n    // Private Properties\n    // -------------------------------------------------------------------------\n\n    private _max: number = 5;\n    private onChange: (m: any) => void;\n    private onTouched: (m: any) => void;\n\n    // -------------------------------------------------------------------------\n    // Implemented from ControlValueAccessor\n    // -------------------------------------------------------------------------\n\n    writeValue(value: number): void {\n        /*if (value % 1 !== value) {\n         this.model = Math.round(value);\n         return;\n         }*/\n\n        this.model = value;\n    }\n\n    registerOnChange(fn: any): void {\n        this.onChange = fn;\n    }\n\n    registerOnTouched(fn: any): void {\n        this.onTouched = fn;\n    }\n\n    // -------------------------------------------------------------------------\n    // Implemented from Va..\n    // -------------------------------------------------------------------------\n\n    validate(c: AbstractControl) {\n        if (this.required && !c.value) {\n            return {\n                required: true\n            };\n        }\n        return null;\n    }\n\n    // -------------------------------------------------------------------------\n    // Lifecycle callbacks\n    // -------------------------------------------------------------------------\n\n    ngOnInit() {\n        this.buildRanges();\n    }\n\n    // -------------------------------------------------------------------------\n    // Host Bindings\n    // -------------------------------------------------------------------------\n\n    @HostListener(\"keydown\", [\"$event\"])\n    onKeydown(event: KeyboardEvent): void {\n        if ([37, 38, 39, 40].indexOf(event.which) === -1 || this.hovered)\n            return;\n\n        event.preventDefault();\n        event.stopPropagation();\n        const increment = this.float ? 0.5 : 1;\n        this.rate(this.model + (event.which === 38 || event.which === 39 ? increment : increment * -1));\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    calculateWidth(item: number) {\n        if (this.hovered > 0) {\n            if (this.hoveredPercent !== undefined && this.hovered === item)\n                return this.hoveredPercent;\n\n            return this.hovered >= item ? 100 : 0;\n        }\n        return this.model >= item ? 100 : 100 - Math.round((item - this.model) * 10) * 10;\n    }\n\n    setHovered(hovered: number): void {\n        if (!this.readonly && !this.disabled) {\n            this.hovered = hovered;\n            this.onHover.emit(hovered);\n        }\n    }\n\n    changeHovered(event: MouseEvent): void {\n        if (!this.float) return;\n        const target = event.target as HTMLElement;\n        const relativeX = event.pageX - target.offsetLeft;\n        const percent = Math.round((relativeX * 100 / target.offsetWidth) / 10) * 10;\n        this.hoveredPercent = percent > 50 ? 100 : 50;\n    }\n\n    resetHovered() {\n        this.hovered = 0;\n        this.hoveredPercent = undefined;\n        this.onLeave.emit(this.hovered);\n    }\n\n\n    rate(value: number) {\n        if (!this.readonly && !this.disabled && value >= 0 && value <= this.ratingRange.length) {\n            const newValue = this.hoveredPercent ? (value - 1) + this.hoveredPercent / 100 : value;\n            this.onChange(newValue);\n            this.model = newValue;\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Private Methods\n    // -------------------------------------------------------------------------\n\n    private buildRanges() {\n        this.ratingRange = this.range(1, this.max);\n    }\n\n    private range(start: number, end: number) {\n        const foo: number[] = [];\n        for (let i = start; i <= end; i++) {\n            foo.push(i);\n        }\n        return foo;\n    }\n\n}\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        Rating,\n    ],\n    exports: [\n        Rating,\n    ],\n})\nexport class RatingModule {\n\n}"],"sourceRoot":""}